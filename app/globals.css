:root{
  --bg: #060815;
  --ink: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.72);
  --card: rgba(20, 20, 28, .38);
  --stroke: rgba(255,255,255,.12);
  --violet: #6D5BFF;
  --violet2: #B39CFF;
}

*{ box-sizing:border-box; }
html, body { height:100%; }
body{
  margin:0;
  background: var(--bg);
  color: var(--ink);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  overflow-x:hidden;
}

.zs-root{
  min-height: 100svh;
  position: relative;
  isolation: isolate;
}

/* 背景（public/bg.jpg） */
.zs-bg{
  position:absolute; inset:0;
  background-image: url("/bg.jpg");
  background-size: cover;
  background-position: center;
  filter: saturate(1.08) contrast(1.05);
  transform: scale(1.03);
  z-index:-3;
}

/* 霧：ゆっくり揺らす（opacity 0.25 → 0.32） */
.zs-fog{
  position:absolute; inset:-20%;
  background:
    radial-gradient(60% 50% at 50% 40%, rgba(170,140,255,.32), rgba(0,0,0,0) 60%),
    radial-gradient(55% 45% at 30% 70%, rgba(140,180,255,.22), rgba(0,0,0,0) 65%),
    radial-gradient(45% 35% at 70% 65%, rgba(210,170,255,.18), rgba(0,0,0,0) 70%),
    linear-gradient(to bottom, rgba(0,0,0,.35), rgba(0,0,0,.55));
  opacity: .30;
  filter: blur(18px);
  z-index:-2;
  animation: fogMove 12s ease-in-out infinite alternate;
  pointer-events:none;
}

@keyframes fogMove{
  0%   { transform: translate3d(-2%, -1%, 0) scale(1.03); opacity:.25; }
  50%  { transform: translate3d(2%, 1.5%, 0) scale(1.05); opacity:.32; }
  100% { transform: translate3d(1%, -1.5%, 0) scale(1.04); opacity:.28; }
}

/* 光のにじみ */
.zs-glow{
  position:absolute; inset:0;
  background:
    radial-gradient(45% 35% at 50% 22%, rgba(120,110,255,.25), rgba(0,0,0,0) 60%),
    radial-gradient(30% 24% at 20% 30%, rgba(255,190,120,.16), rgba(0,0,0,0) 60%),
    radial-gradient(30% 24% at 80% 35%, rgba(120,220,255,.12), rgba(0,0,0,0) 55%);
  mix-blend-mode: screen;
  z-index:-1;
  pointer-events:none;
}

/* 水晶（中央） */
.zs-crystal{
  position:absolute;
  left:50%;
  top:52%;
  width: min(920px, 92vw);
  height: min(920px, 92vw);
  transform: translate(-50%, -50%);
  z-index: 0;
  pointer-events:none;
  opacity: .95;
  filter: drop-shadow(0 18px 80px rgba(120,100,255,.45))
          drop-shadow(0 0 24px rgba(170,140,255,.24));
}

.zs-crystalImg{
  position:absolute; inset:0;
  filter: blur(.25px);
  opacity: .9;
}

/* 中心発光：ここが“儀式感”の核 */
.zs-crystalCore{
  position:absolute;
  left:50%; top:50%;
  width: 34%;
  height: 34%;
  transform: translate(-50%, -52%);
  background: radial-gradient(circle at 50% 50%,
    rgba(255,255,255,.55) 0%,
    rgba(200,170,255,.45) 22%,
    rgba(120,95,255,.28) 42%,
    rgba(0,0,0,0) 68%);
  filter: blur(2px);
  opacity: .72;
  animation: corePulse 2.8s ease-in-out infinite;
  mix-blend-mode: screen;
}

@keyframes corePulse{
  0%   { transform: translate(-50%, -52%) scale(.98); opacity:.62; }
  50%  { transform: translate(-50%, -52%) scale(1.04); opacity:.90; }
  100% { transform: translate(-50%, -52%) scale(1.00); opacity:.70; }
}

/* ボタン押下フラッシュ（短い） */
.zs-crystal.is-flash{
  animation: crystalFlash .25s ease-out 1;
}
@keyframes crystalFlash{
  0% { filter: drop-shadow(0 18px 80px rgba(120,100,255,.45)) drop-shadow(0 0 24px rgba(170,140,255,.24)); }
  40%{ filter: drop-shadow(0 22px 120px rgba(255,255,255,.55)) drop-shadow(0 0 40px rgba(190,160,255,.55)); }
  100%{ filter: drop-shadow(0 18px 80px rgba(120,100,255,.45)) drop-shadow(0 0 24px rgba(170,140,255,.24)); }
}

/* レイアウト */
.zs-main{
  position:relative;
  z-index: 2;
  min-height: 100svh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding: 48px 18px;
}

.zs-header{
  text-align:center;
  margin-bottom: 18px;
  text-shadow: 0 10px 40px rgba(0,0,0,.55);
}

.zs-kicker{
  letter-spacing: .38em;
  font-size: 14px;
  color: rgba(170,190,255,.88);
  margin-bottom: 10px;
}

.zs-title{
  margin:0;
  font-size: clamp(38px, 4.2vw, 64px);
  letter-spacing: .06em;
}

.zs-subtitle{
  margin: 10px 0 0;
  color: var(--muted);
  font-size: 16px;
  line-height: 1.7;
}

/* カード */
.zs-card{
  width: min(960px, 92vw);
  background: var(--card);
  border: 1px solid var(--stroke);
  border-radius: 26px;
  padding: 28px;
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  box-shadow:
    0 30px 90px rgba(0,0,0,.45),
    inset 0 1px 0 rgba(255,255,255,.09);
}

.zs-fields{
  display:flex;
  flex-direction:column;
  gap: 14px;
  margin-bottom: 18px;
}

.zs-labelText{
  display:none;
}

.zs-input{
  width:100%;
  padding: 18px 18px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(10, 12, 24, .38);
  color: var(--ink);
  outline: none;
  font-size: 16px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
}

.zs-input::placeholder{
  color: rgba(255,255,255,.55);
}

.zs-input:focus{
  border-color: rgba(160,130,255,.55);
  box-shadow: 0 0 0 4px rgba(110,90,255,.18), inset 0 1px 0 rgba(255,255,255,.08);
}

.zs-btn{
  width:100%;
  padding: 20px 18px;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,.12);
  background: linear-gradient(135deg, rgba(109,91,255,1), rgba(179,156,255,1));
  color: white;
  font-size: 18px;
  letter-spacing: .08em;
  cursor:pointer;
  box-shadow:
    0 18px 60px rgba(109,91,255,.25),
    0 8px 24px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.15);
  transition: transform .12s ease, filter .12s ease, opacity .12s ease;
}

.zs-btn:hover{
  filter: brightness(1.06);
  transform: translateY(-1px);
}

.zs-btn:active{
  transform: translateY(1px);
  filter: brightness(0.98);
}

.zs-btn.is-disabled,
.zs-btn:disabled{
  opacity:.45;
  cursor:not-allowed;
  transform:none;
  filter:none;
}

.zs-btnSecondary{
  background: rgba(10, 12, 24, .45);
  border: 1px solid rgba(160,130,255,.28);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.10);
}

.zs-foot{
  text-align:center;
  margin-top: 16px;
  color: rgba(255,255,255,.55);
  font-size: 13px;
  letter-spacing: .06em;
}

/* 結果カード */
.zs-resultWrap{
  position: relative;
}

.zs-resultHeader{
  display:flex;
  gap: 12px;
  align-items:flex-start;
  margin-bottom: 10px;
}

.zs-badge{
  font-size: 12px;
  letter-spacing: .18em;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(10,12,24,.30);
}

.zs-resultTitle{
  display:flex;
  flex-direction:column;
  gap: 4px;
}

.zs-resultName{
  font-size: 22px;
  font-weight: 800;
  letter-spacing: .08em;
}

.zs-resultRole{
  color: rgba(255,255,255,.72);
  font-size: 14px;
}

.zs-resultBody{
  margin-top: 12px;
}

.zs-resultSub{
  margin: 0 0 12px;
  color: rgba(255,255,255,.80);
  line-height: 1.7;
}

.zs-traits{
  display:flex;
  flex-wrap:wrap;
  gap: 8px;
  margin-bottom: 14px;
}

.zs-chip{
  padding: 8px 10px;
  border-radius: 999px;
  font-size: 13px;
  color: rgba(255,255,255,.88);
  background: rgba(10,12,24,.35);
  border: 1px solid rgba(255,255,255,.12);
}

.zs-message{
  border-top: 1px solid rgba(255,255,255,.10);
  margin-top: 12px;
  padding-top: 12px;
}

.zs-message p{
  margin: 0 0 10px;
  line-height: 1.8;
  color: rgba(255,255,255,.84);
}

.zs-actions{
  margin-top: 16px;
}

/* キラ粒（派手） */
.zs-sparkles{
  position:absolute;
  inset: -40px;
  pointer-events:none;
  overflow:hidden;
  z-index: 10;
}

.zs-spark{
  position:absolute;
  top: -20px;
  border-radius: 999px;
  background: rgba(255,255,255,.92);
  box-shadow:
    0 0 12px rgba(255,255,255,.65),
    0 0 26px rgba(179,156,255,.45);
  opacity: .95;
  animation-name: sparkleFall;
  animation-timing-function: cubic-bezier(.12,.88,.20,1);
  animation-fill-mode: both;
  transform: translate3d(0,0,0) rotate(var(--rot));
}

.zs-spark.is-star{
  border-radius: 3px;
  background: linear-gradient(135deg, rgba(255,255,255,1), rgba(179,156,255,1));
  box-shadow:
    0 0 18px rgba(255,255,255,.72),
    0 0 38px rgba(179,156,255,.55);
}

@keyframes sparkleFall{
  0%{
    transform: translate3d(0, -20px, 0) rotate(var(--rot)) scale(.9);
    opacity: 0;
    filter: blur(.2px);
  }
  15%{ opacity: 1; }
  100%{
    transform: translate3d(var(--drift), 640px, 0) rotate(calc(var(--rot) + 160deg)) scale(1.05);
    opacity: 0;
    filter: blur(.5px);
  }
}

/* レスポンシブ */
@media (max-width: 560px){
  .zs-card{ padding: 20px; border-radius: 22px; }
  .zs-input{ padding: 16px; border-radius: 16px; }
  .zs-btn{ padding: 18px; border-radius: 18px; }
  .zs-crystal{ top: 55%; opacity: .92; }
}
