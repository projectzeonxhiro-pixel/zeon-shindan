import Link from "next/link";
import { getById } from "../lib/diagnosis";

type Props = {
  searchParams?: {
    id?: string;
    name?: string;
    mood?: string;
  };
};

export default function ResultPage({ searchParams }: Props) {
  const id = searchParams?.id ?? "crystal";
  const name = (searchParams?.name ?? "あなた").toString();
  const mood = (searchParams?.mood ?? "…").toString();

  const d = getById(id);

  return (
    <div
      style={{
        minHeight: "100vh",
        display: "grid",
        placeItems: "center",
        padding: 24,
        background: "radial-gradient(1200px 800px at 50% 20%, rgba(120,80,255,0.25), rgba(0,0,0,0.92))",
        color: "white",
        fontFamily: "system-ui, -apple-system, Segoe UI, Roboto, sans-serif",
      }}
    >
      <div
        style={{
          width: "min(920px, 96vw)",
          borderRadius: 28,
          background: "rgba(10,10,18,0.55)",
          border: "1px solid rgba(255,255,255,0.14)",
          boxShadow: "0 20px 80px rgba(0,0,0,0.55)",
          padding: 28,
        }}
      >
        <div style={{ letterSpacing: 3, opacity: 0.8, fontSize: 12 }}>ZEON • SHINDAN</div>
        <h1 style={{ margin: "10px 0 6px", fontSize: 34 }}>診断結果</h1>

        <div
          style={{
            marginTop: 18,
            borderRadius: 22,
            padding: 22,
            background: "linear-gradient(180deg, rgba(140,110,255,0.25), rgba(0,0,0,0.10))",
            border: "1px solid rgba(180,160,255,0.22)",
          }}
        >
          <div style={{ fontSize: 14, opacity: 0.85 }}>属性</div>
          <div style={{ fontSize: 28, fontWeight: 800, marginTop: 6 }}>{d.title}</div>
          <div style={{ marginTop: 8, opacity: 0.9 }}>{d.catch}</div>

          <div style={{ marginTop: 16, lineHeight: 1.8, opacity: 0.95 }}>
            {d.body(name, mood)}
          </div>

          <div style={{ marginTop: 16, paddingTop: 14, borderTop: "1px solid rgba(255,255,255,0.12)", opacity: 0.95 }}>
            <div style={{ fontSize: 14, opacity: 0.85 }}>アドバイス</div>
            <div style={{ marginTop: 8, lineHeight: 1.8 }}>{d.advice(mood)}</div>
          </div>
        </div>

        <div style={{ display: "flex", gap: 12, flexWrap: "wrap", marginTop: 18 }}>
          <Link
            href="/"
            style={{
              padding: "12px 16px",
              borderRadius: 14,
              background: "rgba(255,255,255,0.08)",
              border: "1px solid rgba(255,255,255,0.14)",
              color: "white",
              textDecoration: "none",
            }}
          >
            ← 戻る
          </Link>

          <button
            onClick={() => {
              const url = window.location.href;
              navigator.clipboard.writeText(url);
              alert("結果URLをコピーしたで！");
            }}
            style={{
              padding: "12px 16px",
              borderRadius: 14,
              background: "rgba(140,110,255,0.38)",
              border: "1px solid rgba(180,160,255,0.28)",
              color: "white",
              cursor: "pointer",
              fontWeight: 700,
            }}
          >
            結果URLをコピー
          </button>
        </div>

        <div style={{ marginTop: 20, fontSize: 12, opacity: 0.7 }}>© ZEON WORLD</div>
      </div>
    </div>
  );
}
